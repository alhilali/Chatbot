{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/providers/conversation-service/conversation-service.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 142;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 142\n// module chunks = 1","var map = {\n\t\"../pages/chat/chat.module\": [\n\t\t416,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 185;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 185\n// module chunks = 1","import { Restaurant } from \"./../../models/restaurant\";\nimport { HTTP, HTTPResponse } from \"@ionic-native/http\";\nimport { Injectable } from '@angular/core';\nimport { Headers, Http, RequestOptions } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/observable/fromPromise';\nimport 'rxjs/add/operator/toPromise';\n\n/*\n  Generated class for the ConversationServiceProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class ConversationServiceProvider {\n  private url = \"/api/v1/workspaces/53e09771-b4bd-4076-99da-0518e2a242fd/message?version=2018-02-16\";\n  //private url = \"https://gateway.watsonplatform.net/assistant/api/v1/workspaces/53e09771-b4bd-4076-99da-0518e2a242fd/message?version=2018-02-16\";\n\n  constructor(private http: Http, private http2: HTTP) {\n    setTimeout(() => {\n      this.sendMessage(\"هلا\");\n    }, 3000);\n    setTimeout(() => {\n      this.sendMessage(\"هلا\");\n    }, 6000);\n  }\n\n  private getHeaders(): RequestOptions {\n    const token = btoa(\"8511cc8c-6dda-419b-96ed-7f460aed5d6a:afE0uE7CiUQu\");\n    let headers = new Headers({\n      'Content-Type': 'application/json',\n      'Authorization': `Basic ${token}`,\n    });\n    let options = new RequestOptions({ headers: headers });\n    return options;\n  }\n\n  sendMessage(message: string, context?: any): Observable<any> {\n    let res = new ConversationDTO(message, context);\n    return this.http.post(this.url, res.payload, this.getHeaders()).map(res => res.json());\n  }\n\n  // sendMessage(message: string, context?: any): Observable<any> {\n  //   this.http2.setHeader(\"content-type\", \"application/json\")\n  //   let res = new ConversationDTO(message, context);\n  //   this.http2.acceptAllCerts(true);\n  //   this.http2.setDataSerializer('json');\n  //   const header = this.http2.getBasicAuthHeader('8511cc8c-6dda-419b-96ed-7f460aed5d6a', 'afE0uE7CiUQu');\n  //   let responseData = this.http2.post(this.url, res.bodyObject, header)\n  //     .then(resp => JSON.parse(resp.data));\n  //   return Observable.fromPromise(responseData);\n  // }\n\n\n  async processFullOrder(data: any, restaurant: Restaurant): Promise<Restaurant> {\n    return new Promise<Restaurant>((resolve, reject) => {\n      restaurant.resetMenu();\n      let numberIndex = data.entities.findIndex(k => k.entity == 'رقم')\n      let numberEntity = data.entities[numberIndex];\n      let numberValue: number = numberEntity.value;\n      let currentOrder: string = data.input.text;\n      const splitString = currentOrder.split(\" \");\n      let prvsStatus = false;\n      let orderFound = false;\n\n      for (let index = 0; index < splitString.length; index++) {\n        const word = splitString[index];\n        let cpyIndex = index\n\n        restaurant.findOrder(word, splitString[cpyIndex += 1]).then(([i, status]) => {\n          // console.log(word + \" at index \" + i + \" status \" + status);\n          if (i >= 0 && !prvsStatus) {\n            restaurant.menu[i].set(Number(numberValue));\n            orderFound = true;\n            data.entities.splice(numberIndex, 1);\n            numberIndex = data.entities.findIndex(k => k.entity == 'رقم')\n            numberEntity = data.entities[numberIndex];\n            if (numberEntity != null)\n              numberValue = numberEntity.value;\n          }\n          if (index + 1 == splitString.length && !orderFound) reject(null)\n          else if (index + 1 == splitString.length && orderFound) resolve(restaurant);\n          prvsStatus = status\n        })\n      }\n\n    })\n  }\n\n\n}\n\nexport class ConversationDTO {\n  message: string;\n  payload: any;\n  bodyObject: any;\n\n  constructor(message: string, contextBody?: any) {\n    this.message = message;\n    this.bodyObject = {\n      input: {\n        text: this.message,\n      },\n      context: contextBody\n    };\n    this.payload = JSON.stringify(this.bodyObject); // Stringify payload\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/conversation-service/conversation-service.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport 'web-animations-js/web-animations.min';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule, Platform } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { HttpModule } from '@angular/http';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { SpeechRecognition } from '@ionic-native/speech-recognition'\nimport { HTTP } from '@ionic-native/http';\nimport { HttpBackend, HttpXhrBackend } from '@angular/common/http';\nimport { NativeHttpModule, NativeHttpBackend, NativeHttpFallback } from 'ionic-native-http-connection-backend';\nimport { TextToSpeech } from '@ionic-native/text-to-speech';\n\nimport { MyApp } from './app.component';\nimport { ConversationServiceProvider } from '../providers/conversation-service/conversation-service';\n\n@NgModule({\n  declarations: [\n    MyApp\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    IonicModule.forRoot(MyApp),\n    HttpModule,\n    NativeHttpModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    { provide: HttpBackend, useClass: NativeHttpFallback, deps: [Platform, NativeHttpBackend, HttpXhrBackend] },\n    { provide: ErrorHandler, useClass: IonicErrorHandler },\n    ConversationServiceProvider,\n    SpeechRecognition,\n    HTTP,\n    TextToSpeech\n  ]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage: any = 'ChatPage';\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}